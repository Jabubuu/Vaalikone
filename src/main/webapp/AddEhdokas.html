<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Lisää ehdokas</title>

<script>
function sendData(){
	//Create a new Javascript object
	var ehdokas=new Object();
	ehdokas.etunimi=document.getElementById("etu").value;
	ehdokas.sukunimi=document.getElementById("suku").value;
 	ehdokas.salasana=document.getElementById("sala").value;
 	/* 	ehdokas.tunnus=document.getElementById("tunnus").value;
ehdokas.puolue=document.getElementById("puolue").value;
	ehdokas.kotipaikkakunta=document.getElementById("koti").value;
	ehdokas.ika=document.getElementById("ika").value;
	ehdokas.ammatti=document.getElementById("ammatti").value;
	ehdokas.miksiEduskuntaan=document.getElementById("miksi").value;
	ehdokas.mitaAsioitaHaluatEdistaa=document.getElementById("mita").value; */
	
	var jsonEhdokas=JSON.stringify(ehdokas);
	var xhttp = new XMLHttpRequest();
	
	xhttp.onreadystatechange = function() {
	  if (this.readyState == 4 && this.status == 200) {
	   var returned=JSON.parse(this.responseText);
	   document.getElementById("inparts").innerHTML="Lisätty ehdokas:" + "<br/>" + "ID = "+returned.ehdokasId+  "<br/>" +" Ehdokas = "+returned.etunimi+" "+returned.sukunimi;
	  }
	};
	
	xhttp.open("POST","./rest/ehdokasservice/add",true);
	xhttp.setRequestHeader("Content-type","application/json");
	xhttp.send(jsonEhdokas);
}

function getData(){
	var xhttp = new XMLHttpRequest();
	
	xhttp.onreadystatechange = function() {
	  if (this.readyState == 4 && this.status == 200) {
	   var json=JSON.parse(xhttp.responseText);
	   var txt="";
	   var x;
	   for (x in json) {
		   txt += json[x].etunimi + " " + json[x].sukunimi + "<br />";
	   }

	   document.getElementById("ehdokkaat").innerHTML = txt;
	  }
	};
	xhttp.open("GET","./rest/ehdokasservice/all",true);
	xhttp.send();
	}


</script>

<link href="style.css" rel="stylesheet" type="text/css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div id="container">

<h2>Lisää ehdokas</h2>
<form action="#" method='post' onsubmit='return false;'>
<input id='etu' type='text' name='etu' value='' placeholder='Etunimi'><br>
<input id='suku' type='text' name='suku' value='' placeholder='Sukunimi'><br>
<input id='sala' type='text' name='sala' value='' placeholder='Salasana'><br>
<!-- <input id='tunnus' type='text' name='tunnus' value='' placeholder='Tunnus'><br>
<input id='puolue' type='text' name='puolue' value='' placeholder='Puolue'><br>
<input id='koti' type='text' name='koti' value='' placeholder='Kotipaikkakunta'><br>
<input id='ika' type='text' name='ika' value='' placeholder='Ikä'><br>
<input id='ammatti' type='text' name='ammatti' value='' placeholder='Ammatti'><br>
<input id='miksi' type='text' name='miksi' value='' placeholder='Miksi eduskuntaan'><br>
<input id='mita' type='text' name='mita' value='' placeholder='Mitä haluaisit muuttaa'><br>-->
<input type='button' name='ok' value='Lisää' onclick='sendData();'><br> 
</form>

<p id='inparts'></p>

<button type="button" onclick="getData();">Näytä kaikki ehdokkaat</button>

<p id='ehdokkaat'></p>

</div>
</body>
</html>